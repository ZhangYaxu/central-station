{% extends "issues/base.html" %}
{% block extra_js %}
<script>
$("#comment-form").hide();
$("#add-comment").click(function(){
    $("#comment-form").show();

});
</script>

{% endblock %}
{% block main_content %}
{{ block.super }}
<form method="post" action=".">{% csrf_token %}
<article class="defect_detail">
    <input type="submit" value="Save" class="btn btn-primary pull-right">
    <input type="button" value="Save and Exit" class="btn btn-success pull-right">
    {% if defect.status == "open" %}
    <input type="button" value="Move to In Progress" class="btn btn-primary pull-right">
    {% endif %}
    <input type="button" class="btn btn-danger pull-right" value="Close">
    <h2>Defect {{ defect.id }} is <span class="label {% if defect.status == "open" %}label-success{% endif %}{% if defect.status == "closed" %}label-important{% endif %}">{{ defect.status }}</span></h2>
    <div class="form_item">
        <label for="description">Description</label>
        <textarea name="description" id="description" class="span9" rows="8">{{ defect.description }}</textarea>
    </div>
    <div class="defect_detail">
        <label for="url">URL</label>
        <input type="text" id="url" name="url" value="{{ defect.url }}" class="span9">
    </div>
    
    <h3>Comments</h3>
    <a href="#" class="btn btn-info pull-right" id="add-comment">Add Comment</a>
    <form method="post" action="." id="comment-form">{% csrf_token %}
    {{ comment_form.comment.label_tag }}
    <textarea name="comment" id="comment" class="span9" rows="8"></textarea>
    {{ comment_form.file.label_tag }}
    {{ comment_form.file }}
    <div class="clearfix"></div>
    <input type="submit" class="btn btn-primary" value="Add Comment">
    </form>
    <div class="clearfix"></div>
    <div class="comments">
    {% for comment in comments %}
    <div class="comment {% if forloop.counter|divisibleby:2 %}even{% else %}odd{% endif %}">
        <span>{{ comment.creation_date }} by {{ comment.author.username }}</span>
        <p>{{ comment }}</p>
    </div>
    {% endfor %}
    </div>
    
</article>
</form>
{% endblock %}

{% block sidebar %}
<form method="post" action=".">{% csrf_token %}

{{ form.milestone.label_tag }}
{{ form.milestone }}

{{ form.type.label_tag }}
{{ form.type }}
{{ form.priority.label_tag }}
{{ form.priority }}

<h3>Issue Created</h3>
<span>{{ defect.creation_date }}</span>
<h3>Modified Date</h3>
<span>{{ defect.last_modified_date }}</span>
</form>
{% endblock %}

